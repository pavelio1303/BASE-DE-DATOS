DROP SCHEMA IF EXISTS BANCO;	#PARA QUE SE REINICIE LA EJECUCIÓN BIEN, BORRANDO LA BASE DE DATOS SI EXISTE.
CREATE SCHEMA BANCO;
USE BANCO;

#TITULAR (DNI, DOMICILIO, TELÉFONO)

CREATE TABLE TITULAR(
	DNI CHAR(9) PRIMARY KEY,
    DOMICILIO VARCHAR(50),
    TELEFONO VARCHAR(15)    
);

#CUENTA (NÚMERO, SALDO, FECHA_APERTURA)

CREATE TABLE CUENTA(
	NUMERO CHAR(24) PRIMARY KEY,
    SALDO DECIMAL(9, 2),
    FECHA_APERTURA DATE
);

#TARJETA (NÚMERO, TIPO, DNI_TITULAR, NUMERO_CUENTA)

CREATE TABLE TARJETA(
	NUMERO CHAR(16) PRIMARY KEY,
    TIPO VARCHAR(20),
    DNI_TITULAR CHAR(9),
    NUMERO_CUENTA CHAR(24),
    
    FOREIGN KEY (DNI_TITULAR) REFERENCES TITULAR(DNI),
    FOREIGN KEY (NUMERO_CUENTA) REFERENCES CUENTA(NUMERO)
);

#TITULAR_DISPONE_CUENTA (DNI_TITULAR, NUMERO_CUENTA)

CREATE TABLE TITULAR_DISPONE_CUENTA(
	DNI_TITULAR CHAR(9),
    NUMERO_CUENTA CHAR(24),
    
    PRIMARY KEY (DNI_TITULAR, NUMERO_CUENTA),
    FOREIGN KEY (DNI_TITULAR) REFERENCES TITULAR(DNI),
    FOREIGN KEY (NUMERO_CUENTA) REFERENCES CUENTA(NUMERO)
);

# CREA UNA CUENTA CON TRES TITULARES Y QUE DOS DE ELLOS TEMGAN UNA TARJETA DE CRÉDITO
# ADEMÁS, UNO DE LOS TITULARES TENDRÁ UNA CUENTA PROPIA Y OTRA TARJETA DE CRÉDITO

INSERT INTO TITULAR VALUES
("12334567B","CALLE PETAURO","658200141"),
("54334655C","CALLE PETAURO","690435141"),
("87334567N","CALLE PETAURO","658232141");

INSERT INTO CUENTA VALUES
("3453242356678786",0,"2020-03-14");

INSERT INTO TITULAR_DISPONE_CUENTA VALUES
("12334567B","3453242356678786"),
("54334655C","3453242356678786"),
("87334567N","3453242356678786");

INSERT INTO TARJETA VALUES
("54688522222184","CRÉDITO","12334567B","3453242356678786"),
("69658524522184","CRÉDITO","54334655C","3453242356678786");

SELECT*FROM TITULAR_DISPONE_CUENTA;






